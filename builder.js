(function(){"use strict";const a=require("readline").createInterface({input:process.stdin,output:process.stdout});function b(t){return console.log(t)}async function c(u){u=`\x1B[36m${u} \x1B[37m`;return await new Promise(v=>{a.question(u,w=>{v(w)})})}async function d(x,y,{DEFAULT:z}){b(`\x1B[36m${x}`);y.forEach(B=>b(`\x1B[37m${B}`));const A=await c("Your choice: ");if(A.trim()===""){return z}return Number(A)}async function e(C){const D=(await c(C)).trim();if(["N","n","No","no","NO"].includes(D)){return false}return true}const{mkdir:f,writeFile:g,readdir:h}=require("fs/promises");async function i(E="."){const{length:F}=await h(E);if(F===0){return false}return true}async function j(G){return f(G)}async function k(H,I){return g(H,I)}const l={"1.19.60.22+":1,"1.19.30.25":2,"1.16.210+":3};async function m(J,K,L,M,N,O){let P;switch(J){case l["1.19.60.22+"]:{P=JSON.stringify({format_version:2,header:{description:L.trim()!==""?L:"-",name:K.trim()!==""?K:"-",uuid:N,version:[0,0,1],min_engine_version:[1,19,0]},modules:[{description:"",type:"script",language:"javascript",uuid:O,version:[0,0,1],entry:"scripts/index.js"}],dependencies:[{module_name:"@minecraft/server",version:"1.1.0-beta"},{module_name:"@minecraft/server-gametest",version:"1.0.0-beta"},{module_name:"@minecraft/server-ui",version:"1.0.0-beta"}],metadata:{authors:[M.trim()!==""?M:"-"]}},null,2);break}case l["1.19.30.25"]:{P=JSON.stringify({format_version:2,header:{description:L.trim()!==""?L:"-",name:K.trim()!==""?K:"-",uuid:N,version:[0,0,1],min_engine_version:[1,19,0]},modules:[{description:"",type:"script",language:"javascript",uuid:O,version:[0,0,1],entry:"scripts/index.js"}],dependencies:[{uuid:"b26a4d4c-afdf-4690-88f8-931846312678",version:"1.0.0-beta"},{uuid:"6f4b6893-1bb6-42fd-b458-7fa3d0c89616",version:"1.0.0-beta"},{uuid:"2BD50A27-AB5F-4F40-A596-3641627C635E",version:"1.0.0-beta"}],metadata:{authors:[M.trim()!==""?M:"-"]}},null,2);return}case l["1.16.210+"]:{print("Not temporarily supported.");return}}return k("manifest.json",P)}const n=require("child_process");async function o(){const Q="curl https://d4rkofficial.github.io/MCBE-ScriptPackBuilder/icon -o pack_icon.png";return await new Promise((R,S)=>{const T=n.exec(Q,(U,V)=>{if(U)S(U);else R(V);T.kill()})})}function p(){const W=()=>{return Math.random().toString(16).slice(-4)};let X="";X+=W();X+=W();X+="-";X+=W();X+="-";X+=W();X+="-";X+=W();X+="-";X+=W();X+=W();X+=W();return X}function q(){const Y=["","  __  __  _____ ____  ______    "," |  \\/  |/ ____|  _ \\|  ____| "," | \\  / | |    | |_) | |__     "," | |\\/| | |    |  _ <|  __|    "," | |  | | |____| |_) | |____    "," |_|  |_|\\_____|____/|______|  ","  __   __   __     __  ___  __        __           "," /__` /  ` |__) | |__)  |  |__)  /\\  /  ` |__/ "," .__/ \\__, |  \\ | |     |  |    /~~\\ \\__, |  \\","  __               __   ___  __              "," |__) |  | | |    |  \\ |__  |__)            "," |__) \\__/ | |___ |__/ |___ |  \\           ",""].join("\n[34m ");b(Y)}const r={"1.19.60.22+":1,"1.19.30.25":2,"1.16.210+":3};async function s(Z,$,_){let aa;switch(Z){case r["1.19.60.22+"]:{aa=["import { world, system } from '@minecraft/server'","","system.run(function mainTick(tickIndex = 0) {","    tickIndex++","    if (tickIndex === 100) {","        world.say(' Hello, world! ')","    } else {","        system.run(() => mainTick(tickIndex))","    }","})"].join("\n");break}case r["1.19.30.25"]:{aa=["import { world } from 'mojang-minecraft'","","let tickIndex = 0","world.events.tick.subscribe(() => {","    tickIndex++","    if (tickIndex === 100) {","        world.getDimension('overworld').runCommand('say Hello, world! ')","    }","})"].join("\n");return}case r["1.16.210+"]:{print("Not temporarily supported.");return}}return k("scripts/index.js",aa)}(async function ba(){const ca=await i();if(!ca){b("You should initialize your project in an empty folder!");if(e("Do you want to create an empty folder? [Y/n] ")){const ha=await c("Folder Name: ");if(ha.trim()==="")return;await j(ha);return ba()}return}await q();const da=await c("Package Name: ");const ea=await c("Package Description: ");const fa=await c("Package Author: ");const ga=await d("Choose Minecraft Version: ",["(1) 1.19.60.22+","(2) 1.19.30.25","(3) 1.16.210+","Default: (1)"],{DEFAULT:1});if(![1,2].includes(ga)){b("This version is not temporarily supported.");return}b("[37mGenerating...");b("[32mSetting up scripts/index.js");await j("scripts");await s(ga);b("[37mdone.");b("[32mSetting up manifest.json");await m(ga,da,ea,fa,p(),p());b("[37mdone.");b("[32mDownloading pack_icon.png");try{await o()}catch{b("[31mNetwork Error: Unable to download default pack_icon.png")}b("[37mFinished! \n")})().finally(()=>{process.exit(0)})})();