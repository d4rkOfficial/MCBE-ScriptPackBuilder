(function(){"use strict";const a=require("readline").createInterface({input:process.stdin,output:process.stdout});function b(u){return console.log(u)}async function c(v){v=`\x1B[36m${v} \x1B[37m`;return await new Promise(w=>{a.question(v,x=>{w(x)})})}async function d(y,z,{DEFAULT:A}){b(`\x1B[36m${y}`);z.forEach(C=>b(`\x1B[37m${C}`));const B=await c("Your choice: ");if(B.trim()===""){return A}return Number(B)}async function e(D){const E=(await c(D)).trim();if(["N","n","No","no","NO"].includes(E)){return false}return true}const{mkdir:f,writeFile:g,readdir:h}=require("fs/promises");async function i(F="."){const{length:G}=await h(F);if(G===0){return false}return true}async function j(H){return f(H)}async function k(I,J){return g(I,J)}const l={"1.19.60.22+":1,"1.19.30.25":2,"1.16.210+":3};async function m(K,L,M,N,O,P){let Q;switch(K){case l["1.19.60.22+"]:{Q=JSON.stringify({format_version:2,header:{description:M.trim()!==""?M:"-",name:L.trim()!==""?L:"-",uuid:O,version:[0,0,1],min_engine_version:[1,19,0]},modules:[{description:"",type:"script",language:"javascript",uuid:P,version:[0,0,1],entry:"scripts/index.js"}],dependencies:[{module_name:"@minecraft/server",version:"1.1.0-beta"},{module_name:"@minecraft/server-gametest",version:"1.0.0-beta"},{module_name:"@minecraft/server-ui",version:"1.0.0-beta"}],metadata:{authors:[N.trim()!==""?N:"-"]}},null,2);break}case l["1.19.30.25"]:{Q=JSON.stringify({format_version:2,header:{description:M.trim()!==""?M:"-",name:L.trim()!==""?L:"-",uuid:O,version:[0,0,1],min_engine_version:[1,19,0]},modules:[{description:"",type:"script",language:"javascript",uuid:P,version:[0,0,1],entry:"scripts/index.js"}],dependencies:[{uuid:"b26a4d4c-afdf-4690-88f8-931846312678",version:"1.0.0-beta"},{uuid:"6f4b6893-1bb6-42fd-b458-7fa3d0c89616",version:"1.0.0-beta"},{uuid:"2BD50A27-AB5F-4F40-A596-3641627C635E",version:"1.0.0-beta"}],metadata:{authors:[N.trim()!==""?N:"-"]}},null,2);return}case l["1.16.210+"]:{print("Not temporarily supported.");return}}return k("manifest.json",Q)}const n=require("child_process");async function o(R){return await new Promise((S,T)=>{const U=n.exec(R,(V,W)=>{if(V)T(V);else S(W);U.kill()})})}async function p(){return o("curl https://d4rkofficial.github.io/MCBE-ScriptPackBuilder/icon -o pack_icon.png")}function q(){const X=()=>{return Math.random().toString(16).slice(-4)};let Y="";Y+=X();Y+=X();Y+="-";Y+=X();Y+="-";Y+=X();Y+="-";Y+=X();Y+="-";Y+=X();Y+=X();Y+=X();return Y}function r(){const Z=["","  __  __  _____ ____  ______    "," |  \\/  |/ ____|  _ \\|  ____| "," | \\  / | |    | |_) | |__     "," | |\\/| | |    |  _ <|  __|    "," | |  | | |____| |_) | |____    "," |_|  |_|\\_____|____/|______|  ","  __   __   __     __  ___  __        __           "," /__` /  ` |__) | |__)  |  |__)  /\\  /  ` |__/ "," .__/ \\__, |  \\ | |     |  |    /~~\\ \\__, |  \\","  __               __   ___  __              "," |__) |  | | |    |  \\ |__  |__)            "," |__) \\__/ | |___ |__/ |___ |  \\           ",""].join("\n[34m ");b(Z)}const s={"1.19.60.22+":1,"1.19.30.25":2,"1.16.210+":3};async function t($,_,aa){let ba;switch($){case s["1.19.60.22+"]:{ba=["import { world, system } from '@minecraft/server'","","system.run(function mainTick(tickIndex = 0) {","    tickIndex++","    if (tickIndex === 100) {","        world.say(' Hello, world! ')","    } else {","        system.run(() => mainTick(tickIndex))","    }","})"].join("\n");break}case s["1.19.30.25"]:{ba=["import { world } from 'mojang-minecraft'","","let tickIndex = 0","world.events.tick.subscribe(() => {","    tickIndex++","    if (tickIndex === 100) {","        world.getDimension('overworld').runCommand('say Hello, world! ')","    }","})"].join("\n");return}case s["1.16.210+"]:{print("Not temporarily supported.");return}}return k("scripts/index.js",ba)}(async function ca(){const da=false;const ea=await i();if(!ea){b("You should initialize your project in an empty folder!");if(e("Do you want to create an empty folder? [Y/n] ")){const ja=await c("Folder Name: ");if(ja.trim()==="")return;await j(ja);return ca()}return}await r();const fa=await c("Package Name: ");const ga=await c("Package Description: ");const ha=await c("Package Author: ");const ia=await d("Choose Minecraft Version: ",["(1) 1.19.60.22+","(2) 1.19.30.25","(3) 1.16.210+","Default: (1)"],{DEFAULT:1});if(![1,2].includes(ia)){b("This version is not temporarily supported.");return}b("[37mGenerating...");b("[32mSetting up scripts/index.js");await j("scripts");await t(ia);b("[37mdone.");b("[32mSetting up manifest.json");await m(ia,fa,ga,ha,q(),q());b("[37mdone.");b("[32mDownloading pack_icon.png");try{await p();b("[37mSuccess!")}catch{b("[31mNetwork Error: Unable to download default pack_icon.png")}b("[32mInstalling Type Docs");try{await o("npm i @minecraft/server@1.1.0-beta.1.19.60-preview.24");await o("npm i @minecraft/server-gametest@1.0.0-beta.1.19.60-preview.24");await o("npm i @minecraft/server-ui@1.0.0-beta.1.19.60-preview.24");if(da);}catch{}b("[37mFinished! \n")})().finally(()=>{process.exit(0)})})();